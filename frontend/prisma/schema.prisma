// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String       @id @default(uuid())
  email            String       @unique
  name             String
  password         String
  emailVerified    Boolean      @default(false)

  // Credits System
  credits          Int          @default(5)

  // Resume
  resumeFileName   String?
  resumeData       Bytes?
  resumeMimeType   String?
  resumeUploadedAt DateTime?

  // Demo Cover Letter
  coverLetterFileName   String?
  coverLetterData       Bytes?
  coverLetterMimeType   String?
  coverLetterUploadedAt DateTime?

  // Demo Cold Email
  coldEmailFileName   String?
  coldEmailData       Bytes?
  coldEmailMimeType   String?
  coldEmailUploadedAt DateTime?

  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  profile          UserProfile?

  @@map("users")
}

model UserProfile {
  id                 String   @id @default(uuid())
  userId             String   @unique
  user               User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  // Personal Info
  phoneNumber        String?
  country            String?
  location           String?
  linkedinUrl        String?
  portfolioUrl       String?
  githubUrl          String?

  // Professional Info
  currentJobTitle    String?
  yearsOfExperience  Float?
  professionalSummary String? @db.Text

  // Education
  highestDegree      String?
  fieldOfStudy       String?
  university         String?
  graduationYear     Int?

  // Work Experience (JSON array of objects)
  workExperience     String? @db.Text

  // Skills & Expertise
  technicalSkills    String? @db.Text
  softSkills         String? @db.Text
  certifications     String? @db.Text

  // Achievements & Projects
  keyAchievements    String? @db.Text
  notableProjects    String? @db.Text

  // Career Preferences
  targetRoles        String? @db.Text
  industriesOfInterest String? @db.Text
  workPreference     String? // remote, on-site, hybrid
  currency           String?
  salaryExpectation  String?

  // Additional Info
  languagesSpoken    String?
  availability       String?
  noticePeriod       String?

  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@map("user_profiles")
}
